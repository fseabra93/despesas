<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Registrar despesa</title>
</head>
<body>

  <h2>Registrar despesa</h2>

  <textarea id="mensagem" rows="4" cols="50"
    placeholder="Ex: Gastei 45 reais na padaria com cartão de crédito"></textarea>
  <br><br>

  <button onclick="enviar()">Enviar</button>

  <p id="status"></p>

  <script>
    async function enviar() {
      const texto = document.getElementById("mensagem").value;

      const response = await fetch(
        "https://fseabra93.app.n8n.cloud/webhook/chat/99cb48bd-5e88-4a03-bc33-5d8e93d28393",
        {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer ipiaba"
          },
          body: JSON.stringify({
            chatInput: texto,
            sessionId: "site-despesas"
          })
        }
      );

      document.getElementById("status").innerText =
        response.ok ? "Mensagem enviada com sucesso." : "Erro ao enviar.";
    }
  </script>

</body>
</html>
